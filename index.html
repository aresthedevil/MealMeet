<!DOCTYPE html>

<html style="height:100%; width:100%; top:0px; left:0px;" >
<head >
    <!--
        <base href="http://symfony.p181457.webspaceconfig.de"> 
        <script type="text/javascript" src="file:///data/data/com.phonegap.aresthedevil.helloworld/hydra_app/lib/jquery-2.0.3.min.js"></script> 
         
        <base  id="base" href="file:///data/data/com.phonegap.aresthedevil.helloworld/hydra_app/"/>
        -->
    <base  id="base" />    
    <script  src="phonegap.js"></script>
    <script type="text/javascript" src="lib/jquery-2.0.3.min.js"></script> 
    
</head>
    <body style="height:100%; width:100%; top:0px; left:0px; margin:0; padding:0;">
        <div style="background-color: rgb(243,243,243); width: 100%; height: 100%;">
            <div id="connection">
                <div id="spinningwheel" style="text-align: center; vertical-align: middle;  padding-bottom: 25%; padding-top: 25%;" >               
                    <div style="clear:both;"><img src="pictures/icon.png" style=" vertical-align: middle; " /></div>
                    <div style="clear:both;"><img src="pictures/spinning-wheel.gif" style="vertical-align: middle;" /></div>
                </div>
                <div id="body" style="display: none;">
                </div>
            </div>
            <div id="error" style="display: none;">
                <div id="standarderror"><p>Unbekannter Fehler </p></div>
                <div id="nointernet" style="display:none;"> <p>Teste sie bitte ihre Internetverbindung </p></div>
                <div id="noserver" style="display:none;"> <p>Der Server ist im Moment nicht erreichbar </p> <button id="but_neu"type="button">Erneut versuchen?</button></div>
               
            </div>
        </div>  
        <script type="text/javascript">
    
        document.addEventListener("deviceready", onDeviceReady, false);
        document.addEventListener("offline", onOffline, false);
        document.addEventListener("resume", onResume, false);
        document.addEventListener("online", onOnline, false);
           
        var pictureSource = null;
        var  destinationType = null;
        var currentid= null;
        
       	var url = "http://symfony.p181457.webspaceconfig.de";
        var online = false;
        
        function loadcontent(){
            console.log(url);
            $('#body').empty();
              $('#body').load(url, function() {
                  var content = $('#body').html();
                  $('#body').html(content);
                  setTimeout(function() {
                      $('#body').show();
                      $('#spinningwheel').hide();
                      console.log(url + " loaded");
                  }, 3000);

              }).fail(function () {
                  $('#connection').hide();
                  $('#error').show();
                  $('#standarderror').hide();
                  $('#noserver').show();
                  console.log(url + " not loaded");
              });
        }
        
        function onDeviceReady() {
            $.cookie("PHPSESSID",null);
            console.log("da");
           // alert('da');
        //    pictureSource = navigator.camera.PictureSourceType;
         //  alert(pictureSource);
         //   destinationType = navigator.camera.DestinationType;
         //   alert(destinationType);
            
            
           if (navigator.network.connection.type!=Connection.NONE) {
        	   loadcontent();
           }
           $('#but_neu').click(function () {
               $('#error').hide();
               $('#standarderror').show();
               $('#spinningwheel').show();
                loadcontent();
            });
        }
        function onResume() {
            
        }
       
        
        function onOffline() {
            var e = document.getElementById("connection");
            e.style.display = "none";
            e = document.getElementById("error");
            e.style.display = "block";
            e = document.getElementById("nointernet");
            e.style.display = "block";
            e = document.getElementById("standarderror");
            e.style.display = "none";

            online = false;
        }
        function onOnline() {
            $('#base').attr('href', url);
            $('#error').hide();
            $('#connection').show();
            $('#standarderror').show();
            $('#spinningwheel').show();
            online = true;
            loadcontent();
        }
        
        function uploadpicture(var typ, var userid ){ 
        	currentid = userid;
        	if(typ == "profil"){
        	//	navigator.camera.getPicture(upload_profile, onFail, {quality:50, destinationType: destinationType.FILE_uri, sourceType: pictureSource.SAVEDPHOTOALBUM})                
        	}
        	else if(typ == "kitchen"){
        	//	navigator.camera.getPicture(upload_kitchen, onFail, {quality:50, destinationType: destinationType.FILE_uri, sourceType: pictureSource.SAVEDPHOTOALBUM})
        	}
        }
        
        function onFail(){
        	var e = document.getElementById("connection");
            e.style.display = "none";
            e = document.getElementById("error");
            e.style.display = "block";           
        }
        
		function upload_kitchen(){
        	
        }
		function upload_profile(){
			
		}
        
        
    </script>
    </body>
</html>
